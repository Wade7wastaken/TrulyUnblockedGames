console.log("Advanced features:"),console.log('Set local storage "origin" to "0" to run the emulator hosted on this domain, and "1" to run it from GitHub.'),console.log('Set local storage "emuWidth" and "emuHeight" to set a custom size for EmulatorJS.');const links={...scrapelinks,...customlinks},linknames=Object.keys(links).concat(["Flash (Ruffle)","Flash (WAFlash)"]).remove("flash");let page=0,games=[],matches=[],filteredsites=[];const linksperpage=100;function getLocalStorage(){switch(localStorage.openTab||(localStorage.openTab="NES"),"1"==localStorage.oldCores&&(getId("coretoggle").className+=" active"),localStorage.emu){case"EJS":getId("emulatortoggle").textContent="EmulatorJS";break;case"NJS":getId("emulatortoggle").textContent="NeptunJS",getId("coretoggle").style.display="none";break;default:getId("emulatortoggle").textContent="EmulatorJS"}}function updateTabs(t){localStorage.openTab=t;var a=getClass("tabcontent");for(let e=0;e<a.length;e++)a[e].style.display="none";getId(t).style.display="block";var o=getClass("tabbuttons");for(let e=0;e<o.length;e++)o[e].className=o[e].className.replace(" active",""),o[e].className.includes(t)&&(o[e].className+=" active");var e,n="Web"==t?"none":"inline";for(e of getClass("webhidden"))e.style.display=n}function loadEmuGames(){var e=getId("buttonparent"),t=document.createElement("button"),a=document.createElement("li"),o=document.createElement("a");a.append(o);for(const i in emugames){var n=emugames[i],l=(t.textContent=n.name,t.className="tabbuttons "+i,t.setAttribute("onclick",`updateTabs("${i}")`),e.append(t.cloneNode(!0)),getId(i));quickAppend("h2",l,n.name);for(const g in n.games){var s=n.games[g];quickAppend("h3",l,g);for(const m in s){category=s[m],"main"!=m&&quickAppend("h4",l,m);var c=document.createElement("ul");for(const d of category)o.textContent=d.name,o.href=`game.html?ver=${n.consolename}&game=`+d.rom,c.append(a.cloneNode(!0));l.append(c)}}}var r=document.createElement("button");r.textContent="Web",r.className="tabbuttons Web",r.setAttribute("onclick",'updateTabs("Web")'),e.append(r)}function loadLinks(){var e=document.createElement("a");for(const a in links){var t=links[a];if("flash"==a)for(const o of t)games.push([o[0],"./ruffle.html?game="+o[1],"Flash (Ruffle)","local"]),games.push([o[0],"./waflash.html?game="+o[1],"Flash (WAFlash)","local"]);else for(const n of t)e.href=n[1],games.push([n[0],n[1],a,e.hostname])}games.sort()}function addSiteSelectors(){const t=document.getElementById("siteselector"),a=document.createElement("button");a.className="buttonslim",a.setAttribute("onclick","togglesites(event);"),linknames.forEach(e=>{a.textContent=e,a.setAttribute("data",e),t.appendChild(a.cloneNode(!0))})}function sortLinks(){matches=[];for(const e of games)e[0].toLowerCase().includes(getId("websearch").value.toLowerCase())&&!filteredsites.includes(e[2])&&matches.push(e)}function renderLinks(){var e=getId("webgames"),t=(e.innerHTML="",document.createElement("div")),a=(t.className="webcontent",document.createElement("a")),o=(a.className="weblinks",a.setAttribute("target","_blank"),document.createElement("p")),n=(o.className="domainname",t.appendChild(a),t.appendChild(o),page*linksperpage);for(const l of matches.slice(n,n+linksperpage))a.textContent=l[0]+" - "+l[2],a.href=l[1],a.style.color="hsl("+360/linknames.length*linknames.indexOf(l[2])+", 100%, 85%)",o.textContent="("+l[3]+")",e.appendChild(t.cloneNode(!0));n=getClass("pagedisplay");Array.from(n).forEach(e=>{e.textContent=`Page ${page+1} of `+(Math.floor(matches.length/linksperpage)+1)})}function toggleEmulator(){var e=getId("emulatortoggle");"EmulatorJS"==e.textContent?(localStorage.emu="NJS",e.textContent="NeptunJS",getId("coretoggle").style.display="none"):(localStorage.emu="EJS",e.textContent="EmulatorJS",getId("coretoggle").style.display="inline-block")}function toggleoldcores(){var e=getId("coretoggle"),t=e.className.split(" ");t.includes("active")?(t.remove("active"),localStorage.oldCores="0"):(localStorage.oldCores="1",t.push("active")),e.className=t.join(" ")}function togglesites(e){var e=e.currentTarget,t=e.className.split(" ");t.includes("active")?(t.remove("active"),filteredsites.remove(e.attributes.data.nodeValue)):(t.push("active"),filteredsites.push(e.attributes.data.nodeValue)),e.className=t.join(" "),onSearchInput()}function nextPage(){page!=Math.floor(matches.length/linksperpage)&&(page+=1,renderLinks())}function prevPage(){0!=page&&(--page,renderLinks())}function onSearchInput(){page=0,sortLinks(),renderLinks()}getLocalStorage(),loadEmuGames(),loadLinks(),addSiteSelectors(),sortLinks(),renderLinks(),updateTabs(localStorage.openTab);