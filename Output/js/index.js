console.log("Advanced features:"),console.log('Set local storage "origin" to "0" to run the emulator hosted on this domain, and "1" to run it from GitHub.'),console.log('Set local storage "emuWidth" and "emuHeight" to set a custom size for EmulatorJS.');const linknames=links.names,linknamelist=Object.keys(links.names).sort();let page=0,games=[],matches=[],filteredsites=[];const linksperpage=100;function getLocalStorage(){switch(localStorage.openTab||(localStorage.openTab="NES"),getId("coretoggle").className+=" "+("1"==localStorage.oldCores?"active":"inactive"),localStorage.emu){case"EJS":getId("emulatortoggle").textContent="EmulatorJS";break;case"NJS":getId("emulatortoggle").textContent="NeptunJS",getId("coretoggle").style.display="none";break;default:getId("emulatortoggle").textContent="EmulatorJS"}}function loadEmuGames(){var e=getId("buttonparent"),t=document.createElement("button"),a=document.createElement("li"),n=document.createElement("a");a.append(n);for(const i in emugames){var o=emugames[i],l=(t.textContent=o.name,t.className="tabbuttons "+i,t.setAttribute("onclick",`updateTabs("${i}")`),e.append(t.cloneNode(!0)),getId(i));quickAppend("h2",l,o.name);for(const m in o.games){var s=o.games[m];quickAppend("h3",l,m);for(const g in s){category=s[g],"main"!=g&&quickAppend("h4",l,g);var c=document.createElement("ul");for(const d of category)n.textContent=d.name,n.href=`game.html?ver=${o.consolename}&game=`+d.rom,c.append(a.cloneNode(!0));l.append(c)}}}var r=document.createElement("button");r.textContent="Web",r.className="tabbuttons Web",r.setAttribute("onclick",'updateTabs("Web")'),e.append(r)}function updateTabs(t){localStorage.openTab=t;var a=getClass("tabcontent");for(let e=0;e<a.length;e++)a[e].style.display="none";getId(t).style.display="block";var n=getClass("tabbuttons");for(let e=0;e<n.length;e++)n[e].className=n[e].className.replace(" active",""),n[e].className.includes(t)&&(n[e].className+=" active");var e,o="Web"==t?"none":"inline";for(e of getClass("webhidden"))e.style.display=o}function loadLinks(){var e=document.createElement("a");for(const t in links)for(const a of links[t])e.href=a[1],games.push([a[0],a[1],t,e.hostname]);games.sort()}function addSiteSelectors(){let t=document.getElementById("siteselector"),a=document.createElement("button");a.className="buttonslim",a.setAttribute("onclick","togglesites(event);"),linknamelist.forEach(e=>{a.textContent=linknames[e],a.setAttribute("data",e),t.appendChild(a.cloneNode(!0))})}function sortLinks(){matches=[];for(const e of games)e[0].toLowerCase().includes(getId("websearch").value.toLowerCase())&&!filteredsites.includes(e[2])&&matches.push(e)}function renderLinks(){(main=getId("webgames")).innerHTML="";var e=document.createElement("div"),t=(e.className="webcontent",document.createElement("a")),a=(t.className="weblinks",t.setAttribute("target","_blank"),document.createElement("p")),n=(a.className="domainname",e.appendChild(t),e.appendChild(a),page*linksperpage);for(const o of matches.slice(n,n+linksperpage))t.textContent=o[0]+" - "+linknames[o[2]],t.href=o[1],t.style.color="hsl("+360/linknamelist.length*linknamelist.indexOf(o[2])+", 100%, 90%)",a.textContent="("+o[3]+")",main.appendChild(e.cloneNode(!0));n=getClass("pagedisplay");Array.from(n).forEach(e=>{e.textContent=`Page ${page+1} of `+(Math.floor(matches.length/linksperpage)+1)})}function togglesites(e){e=e.currentTarget;let t=e.className.split(" ");t.includes("active")?(t=remove(t,"active"),filteredsites=remove(filteredsites,e.attributes.data.nodeValue)):(t.push("active"),filteredsites.push(e.attributes.data.nodeValue)),e.className=t.join(" "),onSearchInput()}function toggleoldcores(){var e=getId("coretoggle");let t=e.className.split(" ");t.includes("active")?(t=remove(t,"active"),localStorage.oldCores="0"):(localStorage.oldCores="1",t.push("active")),e.className=t.join(" ")}function toggleEmulator(){var e=getId("emulatortoggle");"EmulatorJS"==e.textContent?(localStorage.emu="NJS",e.textContent="NeptunJS",getId("coretoggle").style.display="none"):(localStorage.emu="EJS",e.textContent="EmulatorJS",getId("coretoggle").style.display="inline-block")}function nextPage(){page!=Math.floor(matches.length/linksperpage)&&(page+=1,renderLinks())}function prevPage(){0!=page&&(--page,renderLinks())}function onSearchInput(){console.log("running search input"),page=0,sortLinks(),renderLinks()}delete links.names,getLocalStorage(),loadEmuGames(),updateTabs(localStorage.openTab),loadLinks(),addSiteSelectors(),sortLinks(),renderLinks();